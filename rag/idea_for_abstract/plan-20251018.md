# 任务目标：一个优化RAG的想法，帮我验证它

1. 在‘提示词准备’阶段，通过减少‘知识片段’，增加许多‘摘要片段’，从而减少提示词输入量，进而减少大模型的思考时间。‘摘要片段’是指对知识片段进行概括，形成摘要总结。
2. 尽管减少了‘知识片段’，但增加了更多的‘摘要片段’，也可以保障答案准确率，甚至能提升准确率。

## 注意-[文件要求]

- (工作空间)是文件夹`/林生的奇思妙想/rag`，你可以对这个文件夹进行任何改动，包括:增、删、改操作。
- 本任务的文件变更行为，你(必须)且(只能)在(工作空间)中进行文件和文件夹的生成和修改。

## 注意-[不能做的事]

- (不能)使用任何git命令。

## 注意-[尽可能地避免大文本内容的输出]

1. 文本的向量化计算会返回大量数据，你应该输出到临时文件，再读取临时文件头尾100字节去做判断。
2. 文本素材准备好后，你应该读取文件头部100字节去做检查，而不是读取整个文件。
3. 调用API接口将用户问题进行检索，生成检索结果，该接口会返回大量数据，你应该输出到临时文件，再读取临时文件头尾100字节去做判断。

## 任务跟踪

所有的任务都要记录一些信息，以便跟踪。任务信息包括但不限于这些维度：开始时间、结束时间、任务内容。

- 任务信息会记录到‘工作空间’中的tasks文件夹，每个任务信息会记录成单独的任务文件，任务文件的命名格式是`task.序号.任务名.当前时间.txt`，例如：`task.1.编写rag_server.2025-10-18T01:01:01.txt`；任务文件中的内容格式如下：

```
[任务内容]
填写内容

[开始时间]
填写时间

```

- 你应该以(追加)的方式将任务信息写入到任务文件，避免覆盖历史写入的内容。
  - 当任务开始时，你能写入‘任务内容’、‘开始时间’等信息。
  - 当任务进行中，你能自行扩展任务信息，(追加)到任务文件中。
  - 当任务结束时，你能写入‘结束时间’等信息。

----

## 验证计划

参考以下步骤，生成计划并一步步执行。

1. 使用编程助手编写服务：rag_server。
任务内容在此文件：`{工作空间}/rag_server.md`。

2. 使用写作助手准备文本素材。
任务内容在此文件：`{工作空间}/text.md`。

3. 使用编程助手建立RAG知识库。
任务内容在此文件：`{工作空间}/rag_database.md`。

4. 进行RAG知识检索。
以下是任务内容：

```
信息获取：
- 读取`{工作空间}/tasks/rag_server.DONE`获得rag_server的api接口信息。
- 读取`{工作空间}/tasks/rag_data.DONE`获得素材和数据库信息。


内容管理：
使用curl调用rag_server的api接口，命令行执行结果输出到(后缀名)是`.json`的临时文件，文件名格式是`query-{传统/优化}.{问题}.json`，你要直接对(完整)的输出结果进行详细分析；
若结果显示`RateLimitError`的问题，你要重试。
通过各个步骤的执行时间和总耗时，通过答案的准确度，对比‘传统RAG’和‘优化RAG’输出一个详细结果，最终的验证报告输出到文件`{工作空间}/report.{当前时间}.{问题}.md`，文件内容要尽量丰富。


数量控制：
知识片段的数量方面：'传统RAG'要多于'优化RAG'，比例如"7:3"。
'优化RAG'中的摘要片段数量要多于知识片段数量，比例如"1:5"。
```

----
发挥你的专业水平完成任务吧！
